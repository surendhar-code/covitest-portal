{% extends 'main.html' %}
{% block content %}

    <br> <br>
    <div class="container bg-light p-2 text-dark bg-opacity-50" style="width:70%;height:100%; padding:20px; border-radius: 25px;">
        <br>
        <div class="banner">
            <h2 style="text-align:center">THE NEAR BY AVAILABLE VACCINATION CENTERS</h2>
        </div>
        <br>
        <table id="vaccine" class="table table-sm table-primary">
            <thead>
               <tr>
                  <th scope="col">Pincode</th>
                  <th scope="col">Date</th>
                  <th scope="col">Vaccination Center Name</th>
                  <th scope="col">BlockName</th>
                  <th scope="col">Price</th>
                  <th scope="col">Available Capacity</th>
                  <th scope="col">Vaccine Type</th>
               </tr>
            </thead>
            <tbody>
               {% for item in data %}
               <tr>
                  <td>{{item[0]}}</td>
                  <td>{{item[1]}}</td>
                  <td>{{item[2]}}</td>
                  <td>{{item[3]}}</td>
                  <td>{{item[4]}}</td>
                  <td>{{item[5]}}</td>
                  <td>{{item[6]}}</td>
               </tr>
               {% endfor %}
            </tbody>
         </table>
         
    </div>
    
    <div class="btn-group" role="group" aria-label="Basic example" style="position: absolute; left: 270px;">
        <a href = "https://www.cowin.gov.in/home">
            <button type="button" class="btn btn-primary btn-sm btn-block">Click Here to Visit Official Government Website for Booking Vaccination Slot
            </button>
        </a>
        <button class="btn btn-light"></button>
        <a type="button" id="btnExport" value="Export" onclick="Export()">
            <button type="button" class="btn btn-primary btn-sm btn-block">Click Here to Download the Above Vaccination Centers Details
            </button>
        </a>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.22/pdfmake.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
        <script type="text/javascript">
            function Export() {
                html2canvas(document.getElementById('vaccine'), {
                    onrendered: function (canvas) {
                        var data = canvas.toDataURL();
                        var docDefinition = {
                            content: [{
                                image: data,
                                width: 500
                            }]
                        };
                        pdfMake.createPdf(docDefinition).download("vaccine_centers.pdf");
                    }
                });
            }
        </script>

    </div>
    
    <br>
    <br>
    
    
{% endblock %}